{"ast":null,"code":"import _objectSpread from\"/Users/licop/Documents/GitHub/LUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/licop/Documents/GitHub/LUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useContext,useState}from'react';import classNames from'classnames';import{MenuContext}from'./menu';import Icon from'../Icon/icon';import Transition from'../Transition/transition';var SubMenu=function SubMenu(props){var context=useContext(MenuContext);var index=props.index,title=props.title,children=props.children,className=props.className;var opendSubMenus=context.defaultOpenSubMenu;var isOpend=index&&context.mode==='vertical'?opendSubMenus.includes(index):false;var _useState=useState(isOpend),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var classes=classNames('menu-item submenu-item',className,{\"is-active\":context.index===index,\"is-opened\":open,\"is-vertical\":context.mode});var handleClick=function handleClick(e){e.preventDefault();setOpen(!open);};var timer;var handleMouse=function handleMouse(e,toggle){clearTimeout(timer);e.preventDefault();timer=setTimeout(function(){setOpen(toggle);},300);};var clickEvents=context.mode==='vertical'?{onClick:handleClick}:{};var hoverEvents=context.mode==='horizontal'?{onMouseEnter:function onMouseEnter(e){handleMouse(e,true);},onMouseLeave:function onMouseLeave(e){handleMouse(e,false);}}:{};var renderChildren=function renderChildren(){var subMenuClasses=classNames('lui-submenu',{'menu-opened':open});var childrenComponent=React.Children.map(children,function(child,i){var childElement=child;if(childElement.type.displayName==='MenuItem'){return/*#__PURE__*/React.cloneElement(childElement,{index:\"\".concat(index,\"-\").concat(i)});}else{console.error(\"Warning: Menu has a child which is not a MenuItem component\");}});return/*#__PURE__*/_jsx(Transition,{in:open,timeout:300,animation:\"zoom-in-top\",children:/*#__PURE__*/_jsx(\"ul\",{className:subMenuClasses,children:childrenComponent})});};return/*#__PURE__*/_jsxs(\"li\",_objectSpread(_objectSpread({className:classes},hoverEvents),{},{children:[/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({className:\"submenu-title\",onClick:handleClick},clickEvents),{},{children:[title,/*#__PURE__*/_jsx(Icon,{icon:\"angle-down\",className:\"arrow-icon\"})]})),renderChildren()]}),index);};SubMenu.displayName='SubMenu';export default SubMenu;","map":{"version":3,"sources":["/Users/licop/Documents/GitHub/LUI/src/components/Menu/subMenu.tsx"],"names":["React","useContext","useState","classNames","MenuContext","Icon","Transition","SubMenu","props","context","index","title","children","className","opendSubMenus","defaultOpenSubMenu","isOpend","mode","includes","open","setOpen","classes","handleClick","e","preventDefault","timer","handleMouse","toggle","clearTimeout","setTimeout","clickEvents","onClick","hoverEvents","onMouseEnter","onMouseLeave","renderChildren","subMenuClasses","childrenComponent","Children","map","child","i","childElement","type","displayName","cloneElement","console","error"],"mappings":"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","sourcesContent":["import React, { FunctionComponentElement, useContext, useState } from 'react';\nimport classNames from 'classnames';\nimport { MenuContext } from './menu';\nimport { MenuItemProps } from './menuItem';\nimport Icon from '../Icon/icon';\nimport Transition from '../Transition/transition' ;\n\nexport interface SubMenuProps {\n    index?: string,\n    title: string,\n    className?: string\n}\n\nconst SubMenu: React.FC<SubMenuProps> = (props) => {\n    const context = useContext(MenuContext);\n    const {index, title, children, className} = props;\n\n    const opendSubMenus = context.defaultOpenSubMenu as Array<string>;\n    const isOpend = (index && context.mode === 'vertical') ? opendSubMenus.includes(index) : false;\n    const [open, setOpen] = useState(isOpend);\n    const classes = classNames('menu-item submenu-item', className, {\n        \"is-active\": context.index === index,\n        \"is-opened\": open,\n        \"is-vertical\": context.mode\n\n    });\n    const handleClick = (e: React.MouseEvent) => {\n        e.preventDefault();\n        setOpen(!open);\n    }\n    let timer: any;\n    const handleMouse = (e: React.MouseEvent, toggle: boolean) => {\n        clearTimeout(timer);\n        e.preventDefault();\n        timer = setTimeout(() => {\n            setOpen(toggle);\n        }, 300);\n    }\n    const clickEvents = context.mode === 'vertical' ? {\n        onClick: handleClick\n    } : {}\n    const hoverEvents = context.mode === 'horizontal' ? {\n        onMouseEnter: (e: React.MouseEvent) => { handleMouse(e, true) },\n        onMouseLeave: (e: React.MouseEvent) => { handleMouse(e, false) }\n    } : {}\n\n    const renderChildren = () => {\n        const subMenuClasses = classNames('lui-submenu', {\n            'menu-opened': open\n        });\n\n        const childrenComponent = React.Children.map(children, (child, i) => {\n            const childElement = child as FunctionComponentElement<MenuItemProps>;\n            if(childElement.type.displayName === 'MenuItem') {\n                return React.cloneElement(childElement, {\n                    index: `${index}-${i}`\n                })\n            } else {\n                console.error(\"Warning: Menu has a child which is not a MenuItem component\");\n            }\n        })\n         \n        return (\n            <Transition \n                in={open}\n                timeout={300}\n                animation=\"zoom-in-top\"\n            >\n                <ul className={subMenuClasses}>\n                    {childrenComponent}\n                </ul>\n            </Transition>\n            \n        )\n    };\n\n    return (<li key={index} className={classes} {...hoverEvents}>\n        <div className=\"submenu-title\" onClick={handleClick} {...clickEvents}>\n            {title}\n            <Icon icon=\"angle-down\" className=\"arrow-icon\" />\n        </div>\n        {renderChildren()}\n    </li>)\n}\n\nSubMenu.displayName = 'SubMenu';\nexport default SubMenu;\n"]},"metadata":{},"sourceType":"module"}